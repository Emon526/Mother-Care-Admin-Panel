  version: '3.8'

  services:
    app:
      build:
        context: .
        dockerfile: Dockerfile
      volumes:
        - .:/var/www/html
      environment:
        - APP_ENV=production
        - APP_DEBUG=false
      ports:
        - 80:80
        - 443:443
      depends_on:
        - mongodb
      networks:
        - app-network

    mongodb:
      image: mongo:latest
      restart: always
      ports:
        - 27017:27017
      networks:
        - app-network

  networks:
    app-network:
      driver: bridge
